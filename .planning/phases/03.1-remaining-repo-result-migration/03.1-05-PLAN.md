---
phase: 03.1-remaining-repo-result-migration
plan: 05
type: execute
wave: 2
depends_on: ["03.1-01", "03.1-02", "03.1-03", "03.1-04"]
files_modified:
  - pubspec.yaml
  - lib/core/errors/result.dart
autonomous: true

must_haves:
  truths:
    - "dartz is not in pubspec.yaml dependencies"
    - "No file in lib/ or test/ imports dartz"
    - "EitherToResult extension removed from result.dart"
    - "flutter pub get succeeds without dartz"
    - "flutter analyze passes with zero errors"
    - "flutter test passes"
  artifacts:
    - path: "pubspec.yaml"
      provides: "Dependency manifest without dartz"
    - path: "lib/core/errors/result.dart"
      provides: "Clean Result type without dartz bridge adapter"
  key_links:
    - from: "pubspec.yaml"
      to: "entire codebase"
      via: "no remaining dartz imports anywhere"
      pattern: "zero results from grep -r dartz lib/ test/"
---

<objective>
Remove dartz dependency from the project and clean up the EitherToResult migration adapter, verifying the entire codebase is dartz-free.

Purpose: This is the final cleanup step that can only run after ALL 7 repositories are migrated (plans 01-04). Removing dartz too early would cause cascading compilation failures. This plan verifies completeness and removes the last traces.
Output: pubspec.yaml cleaned, result.dart cleaned, project verified dartz-free.
</objective>

<execution_context>
@C:/Users/cartr/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/cartr/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03.1-remaining-repo-result-migration/03.1-RESEARCH.md
@lib/core/errors/result.dart
@pubspec.yaml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify zero dartz usage and remove dependency</name>
  <files>
    pubspec.yaml
    lib/core/errors/result.dart
  </files>
  <action>
    **Step 1 -- Pre-removal verification (CRITICAL: do this BEFORE removing dartz):**

    Run `grep -r "dartz" lib/ test/` to find ALL remaining dartz references. This must return ZERO results.

    If any results are found:
    - For `import 'package:dartz/dartz.dart'`: the file was missed by plans 01-04. Fix it now by replacing with appropriate result.dart import and migrating any Either/Left/Right/Unit/fold usage.
    - For comments mentioning dartz: remove or update the comments.
    - For any other dartz references: evaluate and fix.

    Do NOT proceed to Step 2 until grep returns zero results.

    **Step 2 -- Remove EitherToResult adapter from result.dart:**

    Edit `lib/core/errors/result.dart`:
    - Remove line 1: `import 'package:dartz/dartz.dart' show Either;`
    - Remove the entire `EitherToResult` extension (lines ~104-114):
      ```dart
      extension EitherToResult<T> on Either<Failure, T> {
        Result<T> toResult() => fold(
          (failure) => Result.failure(failure),
          (value) => Result.success(value),
        );
      }
      ```
    - Keep all other Result type code unchanged

    **Step 3 -- Remove dartz from pubspec.yaml:**

    Edit `pubspec.yaml`:
    - Remove the `dartz: ^0.10.1` line from the `dependencies:` section
    - Do NOT remove any other dependencies

    **Step 4 -- Rebuild:**

    Run `flutter pub get` to update lock file and verify resolution succeeds without dartz.

    **Step 5 -- Final verification:**

    Run `flutter analyze` to confirm zero errors across the entire project.
    Run `flutter test` to confirm all tests pass.
    Run `grep -r "dartz" lib/ test/` one final time to confirm zero results.

    If flutter analyze or test reveals any remaining dartz-related errors, fix them before completing.
  </action>
  <verify>
    All three commands must succeed:
    1. `grep -r "dartz" lib/ test/` returns zero results (no matches found)
    2. `flutter analyze` exits with zero errors
    3. `flutter test` passes all tests
  </verify>
  <done>
    dartz removed from pubspec.yaml. EitherToResult adapter removed from result.dart. Zero dartz imports anywhere in lib/ or test/. flutter pub get, flutter analyze, and flutter test all succeed. The project is completely dartz-free.
  </done>
</task>

</tasks>

<verification>
After task completes:
- `grep -r "dartz" lib/ test/ pubspec.yaml` returns zero results
- `flutter pub get` succeeds
- `flutter analyze` returns zero errors
- `flutter test` passes all tests
- `lib/core/errors/result.dart` has no dartz import or EitherToResult extension
</verification>

<success_criteria>
- dartz dependency completely removed from pubspec.yaml
- EitherToResult migration adapter removed from result.dart
- Zero dartz references anywhere in lib/ or test/
- All tests pass
- flutter analyze clean
- Project compiles and runs without dartz
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-remaining-repo-result-migration/03.1-05-SUMMARY.md`
</output>
